<div class="info-table">
  <p *ngIf="this.showInfection" class="title-badge accent-yellow accent-yellow-background">
    Landkreisübersicht
  </p>
  <p *ngIf="!this.showInfection" class="title-badge accent-yellow accent-yellow-background">
    Bundeslandübersicht
  </p>

  <!-- Infektionen  -->
  <div class="info-bar" *ngIf="this.showInfection">
    <input
      (input)="change()"
      [(ngModel)]="searchTerm"
      class="info-bar__search"
      placeholder="Landkreis suchen"
    />
    <div class="info-bar__toggle-button" [ngClass]="{'accent-yellow accent-yellow-background': selectedFavorites}" (click)="change(true)">
      <i class="far fa-bookmark"></i>
    </div>
  </div>

  <!-- Impfungen  -->
  <div class="info-bar" *ngIf="!this.showInfection">
    <input
      (input)="changeStates()"
      [(ngModel)]="searchTerm"
      class="info-bar__search"
      placeholder="Bundesland suchen"
    />
    <div *ngIf="this.showInfection" class="info-bar__toggle-button" [ngClass]="{'accent-yellow accent-yellow-background': selectedFavorites}" (click)="change(true)">
      <i class="far fa-bookmark"></i>
    </div>
  </div>

  <!-- Infektionen -->
  <div class="grid" *ngIf="this.showInfection">
    <div class="row">
      <div class="cell heading" (click)="sort('County')">
        <p>Landkreis</p>
        <i *ngIf="key == 'County'" class="fas fa-sort-alpha-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sort('Incidence7')">
        <p>Inzidenz</p>
        <i *ngIf="key == 'Incidence7'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sort('TotalCases')">
        <p>Bestätigt</p>
        <i *ngIf="key == 'TotalCases'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sort('ActiveCases')">
        <p>Aktiv</p>
        <i *ngIf="key == 'ActiveCases'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sort('Recovered')">
        <p>Genesen</p>
        <i *ngIf="key == 'Recovered'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sort('Deaths')">
        <p>Verstorben</p>
        <i *ngIf="key == 'Deaths'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
    </div>

    <div *ngFor="let county of this.searchCountys | orderBy: key: reverse" class="row">
      <div class="cell state">
        <p (click)="this.selecetCounty(county)" class="pointer"
          [style.font-weight]="this.favoriteService.isFavorite(county.CountyId) ? 'bold': 'normal'">{{ county.StateId == 0 ? 'Deutschland' : county.County }}</p>
        <i class="fa{{ this.favoriteService.isFavorite(county.CountyId) ? 's' : 'r' }} fa-bookmark"
           (click)="this.favoriteService.toggleFavorite(county.CountyId)"
           [style.color]="this.favoriteService.isFavorite(county.CountyId) ? '#ffc71d': '#9e9688'" *ngIf="county.StateId != 0"></i>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-purple">
          <i *ngIf="county.diff.DeltaIncidence7 < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="county.diff.DeltaIncidence7 > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="county.diff.DeltaIncidence7 === 0" class="fas fa-arrow-right"></i>
          <p>{{ county.diff.DeltaIncidence7.toFixed(1).replace(".", ",") }}</p>
        </div>
        <p>{{ county.Incidence7.toFixed(1).replace(".", ",") }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-red">
          <i *ngIf="county.diff.DeltaTotalCases < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="county.diff.DeltaTotalCases > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="county.diff.DeltaTotalCases === 0" class="fas fa-arrow-right"></i>
          <p>{{ county.diff.DeltaTotalCases }}</p>
        </div>
        <p>{{ county.TotalCases }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-blue">
          <!-- <i class="fas fa-arrow-up"></i> -->
          <p>NaN</p>
        </div>
        <p>{{ county.ActiveCases }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-green">
          <i *ngIf="county.diff.DeltaRecovered < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="county.diff.DeltaRecovered > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="county.diff.DeltaRecovered === 0" class="fas fa-arrow-right"></i>
          <p>{{ county.diff.DeltaRecovered }}</p>
        </div>
        <p>{{ county.Recovered }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-light-gray">
          <i *ngIf="county.diff.DeltaDeaths < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="county.diff.DeltaDeaths > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="county.diff.DeltaDeaths === 0" class="fas fa-arrow-right"></i>
          <p>{{ county.diff.DeltaDeaths }}</p>
        </div>
        <p>{{ county.Deaths }}</p>
      </div>
    </div>
  </div>

  <!-- Impfungenen -->

  <div class="grid" id="vaccines" *ngIf="!this.showInfection">
    <div class="row">
      <div class="cell heading" (click)="sortStates('StateName')">
        <p>Bundesland</p>
        <i *ngIf="key == 'StateName'" class="fas fa-sort-alpha-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sortStates('ProportionFirstVaccinations')">
        <p>erste Impfung</p>
        <i *ngIf="key == 'ProportionFirstVaccinations'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sortStates('SumVaccinations')">
        <p>Gesamt</p>
        <i *ngIf="key == 'SumVaccinations'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sortStates('SumAstraZeneca')">
        <p>AstraZeneca</p>
        <i *ngIf="key == 'SumAstraZeneca'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sortStates('SumBioNTech')">
        <p>BioNTech/Pfizer</p>
        <i *ngIf="key == 'SumBioNTech'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sortStates('SumJohnsonAndJohnson')">
        <p>Johnson & Johson</p>
        <i *ngIf="key == 'SumJohnsonAndJohnson'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
      <div class="cell heading" (click)="sortStates('SumModerna')">
        <p>Moderna</p>
        <i *ngIf="key == 'SumModerna'" class="fas fa-sort-numeric-{{ reverse ? 'up' : 'down' }}"></i>
      </div>
    </div>

    <div *ngFor="let state of this.searchStates | orderBy: key: reverse" class="row">
      <div class="cell state">
        <p
          [style.font-weight]="this.favoriteService.isFavorite(state.StateId) ? 'bold': 'normal'">{{ state.StateName }}</p>
        <!-- <i class="fa{{ this.favoriteService.isFavorite(state.StateId) ? 's' : 'r' }} fa-bookmark"
           [style.color]="this.favoriteService.isFavorite(state.StateId) ? '#ffc71d': '#9e9688'" *ngIf="state.StateId != 0"></i> -->
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-purple">
          <i *ngIf="this.state.diff.DeltaProportionFirstVaccinations < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="this.state.diff.DeltaProportionFirstVaccinations > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="this.state.diff.DeltaProportionFirstVaccinations === 0" class="fas fa-arrow-right"></i>
          <p>{{ state.diff.DeltaProportionFirstVaccinations.toFixed(2) }}</p>
        </div>
        <p>{{ state.ProportionFirstVaccinations}} %</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-red">
          <i *ngIf="this.state.diff.DeltaSumVaccinations < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="this.state.diff.DeltaSumVaccinations > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="this.state.diff.DeltaSumVaccinations === 0" class="fas fa-arrow-right"></i>
          <p>{{ state.diff.DeltaSumVaccinations | number: "":"de-DE"}}</p>
        </div>
        <p>{{ (state.SumVaccinations | number: "":"de-DE") }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-blue">
          <i *ngIf="this.state.diff.DeltaSumAstraZeneca < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="this.state.diff.DeltaSumAstraZeneca > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="this.state.diff.DeltaSumAstraZeneca === 0" class="fas fa-arrow-right"></i>
          <p>{{ state.diff.DeltaSumAstraZeneca | number: "":"de-DE"}}</p>
        </div>
        <p>{{ (state.SumAstraZeneca | number: "":"de-DE") }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-green">
          <i *ngIf="this.state.diff.DeltaSumBioNTech < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="this.state.diff.DeltaSumBioNTech > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="this.state.diff.DeltaSumBioNTech === 0" class="fas fa-arrow-right"></i>
          <p>{{ state.diff.DeltaSumBioNTech | number: "":"de-DE"}}</p>
        </div>
        <p>{{ (state.SumBioNTech | number: "":"de-DE") }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-light-gray">
          <i *ngIf="this.state.diff.DeltaSumJohnsonAndJohnson < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="this.state.diff.DeltaSumJohnsonAndJohnson > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="this.state.diff.DeltaSumJohnsonAndJohnson === 0" class="fas fa-arrow-right"></i>
          <p>{{ state.diff.DeltaSumJohnsonAndJohnson | number: "":"de-DE" }}</p>
        </div>
        <p>{{ (state.SumJohnsonAndJohnson | number: "":"de-DE") }}</p>
      </div>
      <div class="cell">
        <div class="cell__difference-to-previous-day accent-light-gray">
          <i *ngIf="this.state.diff.DeltaSumModerna < 0" class="fas fa-arrow-down"></i>
          <i *ngIf="this.state.diff.DeltaSumModerna > 0" class="fas fa-arrow-up"></i>
          <i *ngIf="this.state.diff.DeltaSumModerna === 0" class="fas fa-arrow-right"></i>
          <p>{{ state.diff.DeltaSumModerna | number: "":"de-DE" }}</p>
        </div>
        <p>{{ (state.SumModerna | number: "":"de-DE") }}</p>
      </div>
    </div>
  </div>
</div>
